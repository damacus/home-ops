{"id":"home-ops-01a","title":"OAuth2 proxy for application protection","description":"Verify oauth2-proxy deployment, check OIDC provider configuration, validate cookie settings, test authentication redirect flow, confirm session persistence.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:47:52.808362Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:47:52.808362Z","labels":["auth","kubernetes"],"dependencies":[{"issue_id":"home-ops-01a","depends_on_id":"home-ops-emi","type":"blocks","created_at":"2026-01-17T20:50:16.735816Z","created_by":"Dan Webb"}]}
{"id":"home-ops-0ci","title":"Spegel for peer-to-peer image distribution","description":"Verify Spegel pods on all nodes, check registry mirror configuration, validate image pull through Spegel, test bandwidth savings, monitor cache hit rates.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:48:20.952714Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:48:20.952714Z","labels":["kubernetes","networking"]}
{"id":"home-ops-0qg","title":"Test and verify complete OIDC security flow","description":"End-to-end testing of the complete security configuration.\n\n## Test Scenarios\n\n### Admin User Flow\n1. Log in as admin via Google OAuth\n2. Verify groups claim contains `[\"admin\", \"user\"]`\n3. Verify Mealie admin privileges\n4. Verify Zitadel console access\n\n### Regular User Flow\n1. Log in as approved non-admin user\n2. Verify groups claim contains `[\"user\"]` only\n3. Verify limited Mealie access\n4. Verify cannot access Zitadel admin functions\n\n### Unapproved User Flow\n1. Attempt login as unapproved user\n2. Verify login is blocked or limited\n3. Verify appropriate error message\n\n### Security Tests\n1. Test rate limiting (many rapid requests)\n2. Verify MFA prompts for admin actions\n3. Check session timeout behavior\n4. Verify audit logs capture events\n\n## Acceptance Criteria\n- [ ] All user flows work as expected\n- [ ] Security controls are effective\n- [ ] No bypass vulnerabilities found\n- [ ] Audit trail is complete","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-20T23:15:38.242223Z","updated_at":"2026-01-20T23:15:38.242223Z","labels":["oidc","security","testing"],"dependencies":[{"issue_id":"home-ops-0qg","depends_on_id":"home-ops-xd1","type":"blocks","created_at":"2026-01-20T23:15:38.245923Z","created_by":"daemon"},{"issue_id":"home-ops-0qg","depends_on_id":"home-ops-e6d","type":"blocks","created_at":"2026-01-20T23:15:38.247105Z","created_by":"daemon"}]}
{"id":"home-ops-0wl","title":"Kubeconform manifest validation","description":"Run kubeconform on all manifests, check for schema validation errors, validate CRD schemas are available, fix any validation failures, integrate into CI pipeline.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:48:39.761316Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:48:39.761316Z","labels":["kubernetes","validation"]}
{"id":"home-ops-0yr","title":"Trivy vulnerability scanning","description":"Deploy Trivy operator, configure scanning schedule, validate image scanning on deployment, check VulnerabilityReport resources, set up alerts for critical vulnerabilities, test scanning, validate SBOM generation, monitor metrics, integrate with CI.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:14.550133Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:14.550133Z","labels":["scanning","security"]}
{"id":"home-ops-0zi","title":"Kured for node reboots","description":"Verify Kured pods on all nodes, check reboot schedule configuration, validate Slack/Discord notifications, test manual reboot trigger, confirm PDB respect.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:48:23.989789Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:48:23.989789Z","labels":["kubernetes","system"]}
{"id":"home-ops-167","title":"CIS Kubernetes benchmark compliance","description":"Run kube-bench against cluster, review control plane findings, validate worker node compliance, check etcd security, document remediation actions, create compliance dashboard, schedule regular scans, track compliance over time.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:20.941916Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:20.941916Z","labels":["compliance","security"]}
{"id":"home-ops-2pf","title":"Re-implement Home Assistant volsync backup with correct storage class","description":"The cache PVC should use nfs-csi-ssd instead of openebs-hostpath to avoid volume binding conflicts. The original configuration was stuck for 11 days due to scheduling issues between the NFS source PVC and the openebs-hostpath cache PVC.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:15:08.595392Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:15:08.595392Z","dependencies":[{"issue_id":"home-ops-2pf","depends_on_id":"home-ops-9b9","type":"blocks","created_at":"2026-01-17T20:50:30.442483Z","created_by":"Dan Webb"}]}
{"id":"home-ops-305","title":"EMQX MQTT broker deployment","description":"Verify EMQX HelmRelease, check cluster formation, validate MQTT listener config, test client connectivity, confirm authentication, check ACL rules, validate TLS, test WebSocket, monitor metrics, verify persistent sessions.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:52.458304Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:54:32.704533Z","closed_at":"2026-01-17T20:54:32.704533Z","close_reason":"Mosquitto MQTT broker running in home-automation namespace","labels":["home-automation","mqtt"]}
{"id":"home-ops-34f","title":"Home Assistant Core deployment","description":"Verify HelmRelease deployed, check persistent volume mounted, validate Gateway HTTPRoute, confirm UI accessible, test login flow, verify integrations page, check automation engine, validate recorder DB, test restart, confirm backup config, monitor logs.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:50.44891Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:54:42.768463Z","closed_at":"2026-01-17T20:54:42.768463Z","close_reason":"Home Assistant running in home-automation namespace","labels":["home-automation"],"dependencies":[{"issue_id":"home-ops-34f","depends_on_id":"home-ops-305","type":"blocks","created_at":"2026-01-17T20:50:29.496611Z","created_by":"Dan Webb"}]}
{"id":"home-ops-3ix","title":"HelmRelease management and updates","description":"List all HelmReleases, check for failed/pending releases, verify HelmRepository sources, test manual upgrade, validate rollback functionality.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:47:40.732839Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:54:30.445825Z","closed_at":"2026-01-17T20:54:30.445825Z","close_reason":"Flux controllers running, HelmReleases reconciling","labels":["flux","kubernetes"]}
{"id":"home-ops-3xl","title":"Network policies for pod isolation","description":"Verify default deny policies, check namespace isolation rules, validate ingress policies, test egress restrictions, confirm policy enforcement.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:48:18.939224Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:48:18.939224Z","labels":["kubernetes","networking"]}
{"id":"home-ops-4kl","title":"Cloud-init template for k3s nodes","description":"Verify cloud-init template, check SSH keys, validate network config for static IP, confirm hostname templating, test timezone/locale (en_GB), verify package installation, check k3s script, validate disk partitioning, test on fresh VM, confirm runcmd execution.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:29.819502Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:29.819502Z","labels":["cloud-init","provisioning"]}
{"id":"home-ops-53m","title":"Voice assistant pipeline (Whisper/Piper)","description":"Deploy Whisper STT, verify model download, validate Wyoming protocol, test HA integration, deploy Piper TTS, check voice models, configure voice assistant in HA, set up wake word detection, test voice control, monitor latency.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:58.584102Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:54:34.71173Z","closed_at":"2026-01-17T20:54:34.71173Z","close_reason":"Wyoming Piper and Whisper running in home-automation namespace","labels":["home-automation","voice"]}
{"id":"home-ops-5aj","title":"Frigate NVR deployment","description":"Verify HelmRelease deployed, check GPU passthrough for detection, validate camera stream connectivity, confirm MQTT integration, test object detection, verify recording config, check snapshot generation, validate HA integration, test notifications.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:56.194532Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:54:33.719399Z","closed_at":"2026-01-17T20:54:33.719399Z","close_reason":"Frigate NVR running in home-automation namespace","labels":["frigate","home-automation"],"dependencies":[{"issue_id":"home-ops-5aj","depends_on_id":"home-ops-305","type":"blocks","created_at":"2026-01-17T20:50:18.453947Z","created_by":"Dan Webb"}]}
{"id":"home-ops-5cb","title":"ESPHome dashboard deployment","description":"Verify HelmRelease deployed, check persistent storage, validate Gateway HTTPRoute, confirm dashboard UI accessible, test device compilation, verify OTA update, check secrets management, validate HA API integration.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:50:00.423061Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:54:35.613409Z","closed_at":"2026-01-17T20:54:35.613409Z","close_reason":"ESPHome running in home-automation namespace","labels":["esphome","home-automation"]}
{"id":"home-ops-68a","title":"Epic: Security \u0026 Compliance","description":"Parent epic for security tasks including secrets management, authentication, RBAC, network policies, scanning, and compliance.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:46:58.806736Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:46:58.806736Z","labels":["epic"]}
{"id":"home-ops-6bp","title":"Pre-commit hooks for code quality","description":"Verify pre-commit is configured, check YAML linting rules, validate Kubernetes manifest checks, test commit hook execution, confirm CI integration.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:48:43.269515Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:48:43.269515Z","labels":["kubernetes","validation"]}
{"id":"home-ops-6bw","title":"InSpec compliance profile for nodes","description":"Verify InSpec profile exists, check control definitions, validate SSH transport, test against running node, confirm all controls pass, check security baseline, validate kernel hardening, test network security, verify user account controls, generate compliance report.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:36.60994Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:36.60994Z","labels":["inspec","provisioning"],"dependencies":[{"issue_id":"home-ops-6bw","depends_on_id":"home-ops-7bc","type":"blocks","created_at":"2026-01-17T20:50:21.310819Z","created_by":"Dan Webb"}]}
{"id":"home-ops-6nw","title":"Create Zitadel Action to inject custom group claims","description":"Since Google OAuth doesn't provide group claims, use Zitadel Actions to inject custom groups into tokens.\n\n## Zitadel Actions Overview\nActions are JavaScript functions that run at specific points in the authentication flow. They can modify tokens and add custom claims.\n\n## Implementation Steps\n1. Create a Zitadel Action script that:\n   - Checks the user's email or metadata\n   - Assigns groups based on a mapping (e.g., admin emails → \"admin\" group)\n   - Injects the `groups` claim into the token\n\n2. Example Action script:\n```javascript\nfunction setCustomClaims(ctx, api) {\n  // Define admin users\n  const adminEmails = [\n    'dan.m.webb@gmail.com',\n    // Add other admin emails\n  ];\n  \n  const groups = [];\n  \n  if (adminEmails.includes(ctx.v1.user.email)) {\n    groups.push('admin');\n  }\n  groups.push('user'); // Everyone gets 'user' group\n  \n  api.v1.claims.setClaim('groups', groups);\n}\n```\n\n3. Attach Action to \"Pre Userinfo creation\" or \"Complement Token\" flow\n\n## Acceptance Criteria\n- [ ] Action created in Zitadel\n- [ ] Groups claim appears in OIDC tokens\n- [ ] Admin users get \"admin\" group\n- [ ] Regular users get \"user\" group only","notes":"Starting implementation. Will create Zitadel Action to inject groups claim based on approved users list.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-20T23:13:07.047707Z","updated_at":"2026-01-21T07:53:05.60343Z","labels":["oidc","security","zitadel"],"dependencies":[{"issue_id":"home-ops-6nw","depends_on_id":"home-ops-yyj","type":"blocks","created_at":"2026-01-20T23:13:07.053619Z","created_by":"daemon"}]}
{"id":"home-ops-7bc","title":"First control plane node bootstrap","description":"Verify cloud-init completes, check k3s server starts, validate kubeconfig generated, test kubectl access, confirm cluster initialized, verify etcd running, check API server responding, validate node Ready, test pod scheduling, confirm CNI functioning.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:41.504479Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:41.504479Z","labels":["bootstrap","provisioning"],"dependencies":[{"issue_id":"home-ops-7bc","depends_on_id":"home-ops-g84","type":"blocks","created_at":"2026-01-17T20:50:20.401793Z","created_by":"Dan Webb"}]}
{"id":"home-ops-8nm","title":"Epic: Storage Infrastructure","description":"Parent epic for all storage-related tasks including Volsync backup validation and MinIO to RustFS migration.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:46:56.365946Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:46:56.365946Z","labels":["epic"]}
{"id":"home-ops-8yu","title":"Victoria Metrics stack deployment","description":"Verify HelmRelease, check VMSingle pod, validate VMAgent scraping, confirm VMAlert, verify Alertmanager, test ServiceMonitor/PodMonitor discovery, check kube-state-metrics, validate node-exporter, confirm persistent storage, review TooHighSlowInsertsRate/CPUThrottlingHigh/ScrapePoolHasNoTargets alerts.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:47:44.123433Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:52:40.975387Z","closed_at":"2026-01-17T20:52:40.975387Z","close_reason":"Victoria Metrics stack is deployed and healthy","labels":["kubernetes","monitoring"]}
{"id":"home-ops-9b9","title":"Volsync backup and restore validation","description":"Verify Volsync controller, check ReplicationSource resources, validate backup schedule, test manual backup, verify backups in MinIO/S3, test restore, check retention policy, validate encryption, monitor metrics in Grafana, run InSpec tests.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:47:19.189085Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:54:44.39856Z","closed_at":"2026-01-17T20:54:44.39856Z","close_reason":"Volsync controller running, paperless-local-backup replicationsource working with successful syncs","labels":["storage"]}
{"id":"home-ops-a8b","title":"Intel Device Plugins for hardware acceleration","description":"Verify device plugin pods, check GPU resource availability, validate QAT if configured, test workload scheduling to GPU nodes, confirm resource limits.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:48:17.321077Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:48:17.321077Z","labels":["kubernetes","scheduling"]}
{"id":"home-ops-b8q","title":"Zigbee2MQTT deployment","description":"Verify HelmRelease deployed, check USB coordinator passthrough, validate MQTT connectivity, confirm web UI accessible, test device pairing, verify existing devices online, check coordinator firmware, validate network map, monitor Zigbee health.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:54.325357Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:54.325357Z","labels":["home-automation","zigbee"],"dependencies":[{"issue_id":"home-ops-b8q","depends_on_id":"home-ops-305","type":"blocks","created_at":"2026-01-17T20:50:17.558083Z","created_by":"Dan Webb"}]}
{"id":"home-ops-c3l","title":"Velero cluster backup solution","description":"Verify Velero pods, check backup storage location, validate backup schedule, test manual backup, verify restore functionality, check volume snapshot integration, validate encryption, test disaster recovery, monitor metrics, confirm retention policies.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:48:45.541185Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:48:45.541185Z","labels":["backup","kubernetes"]}
{"id":"home-ops-c9u","title":"Kubernetes RBAC and service account management","description":"Define ClusterRoles, create RoleBindings, validate admin/developer access, confirm read-only monitoring access, check service account permissions, validate RBAC for Flux, test namespace isolation, audit existing policies.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:16.96868Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:16.96868Z","labels":["rbac","security"]}
{"id":"home-ops-c9x","title":"Harden Zitadel for public internet exposure","description":"Security hardening for Zitadel when exposed to the internet.\n\n## Security Checklist\n\n### Authentication Hardening\n- [ ] Enable MFA requirement for admin users\n- [ ] Configure session timeout policies\n- [ ] Enable brute-force protection (lockout after failed attempts)\n- [ ] Configure password policies (if using local accounts)\n\n### Network Security\n- [ ] Ensure TLS is properly configured (cert-manager)\n- [ ] Configure rate limiting via Cilium Gateway\n- [ ] Set up proper CORS policies\n- [ ] Consider geo-blocking if needed\n\n### Audit \u0026 Monitoring\n- [ ] Enable audit logging\n- [ ] Set up alerts for suspicious activity\n- [ ] Monitor login failures\n\n### Zitadel-Specific\n- [ ] Review and restrict API permissions\n- [ ] Disable unused features\n- [ ] Review OAuth/OIDC settings for each application\n- [ ] Ensure secrets are rotated periodically\n\n## Implementation\nMost settings are in Zitadel Console → Settings → Security\n\n## Acceptance Criteria\n- [ ] MFA enabled for admins\n- [ ] Rate limiting configured\n- [ ] Audit logging enabled\n- [ ] All TLS certificates valid","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-20T23:13:57.415989Z","updated_at":"2026-01-20T23:13:57.415989Z","labels":["hardening","security","zitadel"],"dependencies":[{"issue_id":"home-ops-c9x","depends_on_id":"home-ops-myi","type":"blocks","created_at":"2026-01-20T23:13:57.419036Z","created_by":"daemon"}]}
{"id":"home-ops-cdr","title":"k8s_gateway for split-horizon DNS","description":"Verify k8s_gateway deployment, check Gateway API integration, validate internal DNS responses, test external client resolution, confirm zone delegation.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:47:47.563312Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:47:47.563312Z","labels":["dns","kubernetes"]}
{"id":"home-ops-e6d","title":"Configure Cilium Gateway rate limiting for Zitadel and Mealie","description":"Add rate limiting to protect Zitadel and Mealie from abuse when exposed to the internet.\n\n## Cilium Gateway API Rate Limiting\nUse HTTPRoute filters or BackendLBPolicy for rate limiting.\n\n## Recommended Limits\n- **Zitadel login endpoint**: 10 requests/minute per IP\n- **Zitadel API**: 100 requests/minute per IP\n- **Mealie API**: 60 requests/minute per IP\n\n## Implementation\nCreate BackendLBPolicy or use HTTPRoute rate limit filter:\n\n```yaml\napiVersion: cilium.io/v2\nkind: CiliumEnvoyConfig\nmetadata:\n  name: rate-limit-zitadel\nspec:\n  # Rate limiting configuration\n```\n\nOr use external rate limiting with Cilium L7 policies.\n\n## Acceptance Criteria\n- [ ] Rate limiting applied to Zitadel\n- [ ] Rate limiting applied to Mealie\n- [ ] Legitimate users not affected\n- [ ] Abuse attempts are blocked","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-20T23:15:29.477521Z","updated_at":"2026-01-20T23:15:29.477521Z","labels":["cilium","gateway-api","security"],"dependencies":[{"issue_id":"home-ops-e6d","depends_on_id":"home-ops-c9x","type":"blocks","created_at":"2026-01-20T23:15:29.480226Z","created_by":"daemon"}]}
{"id":"home-ops-emi","title":"Zitadel identity provider deployment","description":"Deploy Zitadel with CNPG PostgreSQL, verify pods, check DB connectivity, confirm UI via Gateway, configure admin user, set up family accounts, enable passkey/WebAuthn, configure Google OAuth, set up LDAP, create OIDC apps for Mealie/Paperless/Grafana, test SSO, configure backup.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:47:51.082166Z","created_by":"Dan Webb","updated_at":"2026-01-20T12:07:59.764393Z","closed_at":"2026-01-20T12:07:59.764393Z","close_reason":"Zitadel OIDC integration completed for Mealie. Configuration verified: OIDC_CONFIGURATION_URL=https://zitadel.ironstone.casa/.well-known/openid-configuration, OIDC_CLIENT_ID=355240244964035631, OIDC_PROVIDER_NAME=Zitadel. HelmRelease upgraded to app-template 4.6.2 and pod restarted with correct configuration.","labels":["auth","kubernetes"]}
{"id":"home-ops-ez4","title":"Migrate object storage from MinIO to RustFS","description":"Audit current MinIO buckets, deploy RustFS, verify S3 compatibility, create sync jobs, update application secrets, validate connectivity, verify data integrity, decommission MinIO, run InSpec tests.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:47:21.196546Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:47:21.196546Z","labels":["migration","storage"],"dependencies":[{"issue_id":"home-ops-ez4","depends_on_id":"home-ops-9b9","type":"blocks","created_at":"2026-01-17T20:47:34.784094Z","created_by":"Dan Webb"}]}
{"id":"home-ops-g0s","title":"Epic: Home Automation","description":"Parent epic for home automation tasks including Home Assistant, MQTT, Zigbee, Z-Wave, voice assistants, Frigate, and integrations.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:47:01.523437Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:47:01.523437Z","labels":["epic"]}
{"id":"home-ops-g84","title":"Ansible inventory and k3s playbooks","description":"Verify inventory structure, check host groups, validate host/group variables, test SSH connectivity, check ansible.cfg, validate vault password, test ping, confirm privilege escalation, verify k3s installation playbook, test idempotency.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:31.990274Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:31.990274Z","labels":["ansible","provisioning"],"dependencies":[{"issue_id":"home-ops-g84","depends_on_id":"home-ops-4kl","type":"blocks","created_at":"2026-01-17T20:50:19.471254Z","created_by":"Dan Webb"}]}
{"id":"home-ops-gvf","title":"Cilium network policy enforcement","description":"Create default deny policies, define allowed ingress/egress rules per namespace, validate DNS egress, test inter-namespace communication, confirm monitoring namespace access, validate Gateway namespace policies, test enforcement.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:18.863772Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:18.863772Z","labels":["network","security"]}
{"id":"home-ops-hph","title":"Epic: Kubernetes Platform","description":"Parent epic for Kubernetes platform tasks including monitoring, validation, auth, and system components.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:46:57.470553Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:46:57.470553Z","labels":["epic"]}
{"id":"home-ops-hvt","title":"Alertmanager notification routing","description":"Verify Alertmanager configuration, check notification receivers, test Discord/Slack webhook integration, validate alert routing rules, confirm silencing functionality.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:47:45.781441Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:47:45.781441Z","labels":["kubernetes","monitoring"],"dependencies":[{"issue_id":"home-ops-hvt","depends_on_id":"home-ops-8yu","type":"blocks","created_at":"2026-01-17T20:50:28.71351Z","created_by":"Dan Webb"}]}
{"id":"home-ops-j7l","title":"Rock Pi node configuration","description":"Verify Rock Pi specific cloud-init, check network interface (enP4p65s0), validate ARM64 k3s binary, test boot from SD/eMMC, confirm hardware acceleration, verify power management, check thermal monitoring, validate storage, test network performance.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:39.230758Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:39.230758Z","labels":["hardware","provisioning"]}
{"id":"home-ops-jc4","title":"Epic: Node Provisioning","description":"Parent epic for node provisioning tasks including cloud-init, Ansible, hardware config, VM validation, and InSpec compliance.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:47:00.109845Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:47:00.109845Z","labels":["epic"]}
{"id":"home-ops-msr","title":"Create allowlist of approved users in Zitadel","description":"Maintain a list of approved users who can access the system.\n\n## Options for Managing Approved Users\n\n### Option 1: Zitadel Metadata\nStore user roles/approval status in Zitadel user metadata:\n- Add metadata key `approved: true` to allowed users\n- Action script checks metadata before allowing login\n\n### Option 2: Hardcoded Email List in Action\nMaintain list directly in the Zitadel Action script (simpler but requires Action update for changes)\n\n### Option 3: External Config\nStore approved users in a ConfigMap/Secret and have Action fetch it (more complex)\n\n## Recommended Approach\nStart with hardcoded email list in Action, migrate to metadata if list grows.\n\n## User Categories\n1. **Admins** - Full admin access (you + trusted family)\n2. **Users** - Regular access (family members)\n3. **Blocked** - Explicitly denied (catch-all for unapproved)\n\n## Acceptance Criteria\n- [ ] Approved user list defined\n- [ ] Unapproved users cannot access protected apps\n- [ ] Easy to add/remove users from list","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-20T23:13:47.838215Z","updated_at":"2026-01-20T23:13:47.838215Z","labels":["security","zitadel"],"dependencies":[{"issue_id":"home-ops-msr","depends_on_id":"home-ops-yyj","type":"blocks","created_at":"2026-01-20T23:13:47.841565Z","created_by":"daemon"}]}
{"id":"home-ops-myi","title":"Secure Mealie and Zitadel for Internet Exposure","description":"Comprehensive security hardening for Mealie and Zitadel to safely expose them to the internet. Includes access control, role management, and custom claims configuration.\n\n## Goals\n- Restrict account signup to approved users only\n- Implement admin vs regular user roles\n- Configure Zitadel Actions to inject group claims (since Google OAuth doesn't provide them)\n- Ensure both services are hardened for public internet access\n\n## Context\n- Using Google OAuth as primary IdP\n- Google doesn't provide group claims\n- Need to \"fudge\" groups via Zitadel Actions\n- Mealie uses OIDC groups_claim for role assignment","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-20T23:12:48.567107Z","updated_at":"2026-01-20T23:12:48.567107Z","labels":["mealie","oidc","security","zitadel"]}
{"id":"home-ops-qyu","title":"Node Problem Detector deployment","description":"Verify NPD pods on all nodes, check problem detection rules, validate node condition reporting, test alert integration, confirm kernel log monitoring.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:48:22.302554Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:48:22.302554Z","labels":["kubernetes","system"]}
{"id":"home-ops-stq","title":"Dragonfly as Redis alternative","description":"Verify Dragonfly deployment, check memory configuration, validate Redis protocol compatibility, test application connectivity, monitor performance metrics.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:48:15.133004Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:48:15.133004Z","labels":["database","kubernetes"]}
{"id":"home-ops-uko","title":"Kyverno policy engine deployment","description":"Verify Kyverno pods, check ClusterPolicy resources, validate policy enforcement mode, test violation handling, confirm policy reports, check admission webhook, validate background scanning, test exceptions, monitor metrics.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:12.523959Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:12.523959Z","labels":["policy","security"]}
{"id":"home-ops-usu","title":"1Password Connect and External Secrets integration","description":"Verify 1Password Connect server, check credentials secret, validate API connectivity, test secret retrieval, confirm secret sync, verify rotation workflow, check access logging, validate vault permissions, test failover, monitor health metrics.","status":"closed","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:10.639656Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:54:31.649326Z","closed_at":"2026-01-17T20:54:31.649326Z","close_reason":"1Password Connect and External Secrets running in external-secrets namespace","labels":["secrets","security"]}
{"id":"home-ops-v3a","title":"QEMU VM validation loop","description":"Verify QEMU installed, check VM creation script, validate cloud-init ISO generation, test VM boot, confirm SSH access, verify k3s installation, check node joins cluster, validate cleanup script, test full provisioning cycle.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:49:34.226823Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:49:34.226823Z","labels":["provisioning","vm"]}
{"id":"home-ops-x81","title":"Flux-local for GitOps validation","description":"Run flux-local build on repository, check for Kustomization errors, validate HelmRelease rendering, test diff against live cluster, integrate into PR checks.","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-01-17T20:48:41.635187Z","created_by":"Dan Webb","updated_at":"2026-01-17T20:48:41.635187Z","labels":["kubernetes","validation"]}
{"id":"home-ops-xd1","title":"Configure Mealie to use Zitadel groups for role assignment","description":"Configure Mealie to read the groups claim from Zitadel and assign roles accordingly.\n\n## Current Configuration\nMealie is already configured with:\n- `OIDC_GROUPS_CLAIM: \"groups\"`\n\n## Mealie Role Mapping\nMealie supports these roles:\n- **admin** - Full access, can manage users and settings\n- **user** - Standard access, can create/edit recipes\n\n## Implementation\n1. Verify Mealie reads the `groups` claim correctly\n2. Map Zitadel groups to Mealie roles:\n   - `admin` group → Mealie admin role\n   - `user` group → Mealie user role\n\n## Testing\n1. Log in as admin user via Zitadel\n2. Verify admin privileges in Mealie\n3. Log in as regular user\n4. Verify limited privileges\n\n## Acceptance Criteria\n- [ ] Admin users have full Mealie admin access\n- [ ] Regular users have standard user access\n- [ ] Groups claim is being read correctly","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-20T23:13:37.412921Z","updated_at":"2026-01-20T23:13:37.412921Z","labels":["mealie","oidc","security"],"dependencies":[{"issue_id":"home-ops-xd1","depends_on_id":"home-ops-6nw","type":"blocks","created_at":"2026-01-20T23:13:37.415179Z","created_by":"daemon"}]}
{"id":"home-ops-yyj","title":"Configure Zitadel to restrict user registration","description":"Restrict who can create accounts in Zitadel.\n\n## Options\n1. **Disable public registration** - Only admins can create users\n2. **Domain allowlist** - Only allow specific email domains (e.g., @ironstone.casa, specific Gmail addresses)\n3. **Invitation-only** - Require admin invitation to join\n\n## Implementation\n- Navigate to Zitadel Console → Settings → Login Behavior\n- Disable \"Allow Register\" for public signup\n- Or configure domain restrictions under Organization Settings\n\n## Acceptance Criteria\n- [ ] Public registration is disabled or restricted\n- [ ] Only approved users can create accounts\n- [ ] Existing users can still log in via Google OAuth","notes":"Users created via API:\n- dan.m.webb@gmail.com (ID: 356492137971319809)\n- 28lauracummings@gmail.com (ID: 356492138038428673)\n- webbglor@googlemail.com (ID: 356492138088760321)\n- gtxthor37@gmail.com (ID: 356492138139091969)\n\nStill need to disable public registration in Zitadel Console.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-20T23:12:56.597402Z","updated_at":"2026-01-21T07:51:21.110682Z","labels":["security","zitadel"],"dependencies":[{"issue_id":"home-ops-yyj","depends_on_id":"home-ops-myi","type":"blocks","created_at":"2026-01-20T23:12:56.601361Z","created_by":"daemon"}]}
