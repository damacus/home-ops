---
service:
  enabled: true
  type: LoadBalancer
  annotations:
    coredns.io/hostname: "ingress-int.${SECRET_DOMAIN_INTERNAL}"
    kube-vip.io/loadbalancerIPs: "${TRAEFIK_INTERNAL_ADDR}"
  spec:
    externalTrafficPolicy: Cluster

ports:
  traefik:
    expose: true
  web:
    redirectTo:
      port: websecure
  websecure:
    tls:
      enabled: true
      options: default
    forwardedHeaders:
      trustedIPs:
        - 10.0.0.0/8
        - 172.16.0.0/12
        - 192.168.0.0/16
    proxyProtocol:
      trustedIPs:
        - 10.0.0.0/8
        - 172.16.0.0/12
        - 192.168.0.0/16
    http3:
      enabled: true
  metrics:
    port: 8082
    expose: true
    exposedPort: 8082

providers:
  kubernetesCRD:
    enabled: true
    ingressClass: traefik-internal
    allowCrossNamespace: true
    allowExternalNameServices: true
  kubernetesIngress:
    enabled: true
    ingressClass: traefik-internal
    ip: "${TRAEFIK_INTERNAL_ADDR}"
    allowExternalNameServices: true
    publishedService:
      enabled: true
